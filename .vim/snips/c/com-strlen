If len is < 0, strlen() is used to calculate it.
